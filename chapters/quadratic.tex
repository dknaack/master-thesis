\chapter{Periodic Representation of Quadratic Irrationals}

\begin{definition}
  A number $x ∈ ℝ$ is said to be a \emph{quadratic irrational} if $x$ is the root of some
  polynomial $p(x)$ over the rational numbers with degree $2$.
\end{definition}

\section{Continued Fractions}

\begin{definition}
  % TODO: Include definition for continued fractions
\end{definition}

\begin{definition}
  The \emph{$n$-th convergent} of an infinite continued fraction $[a₀; a₁, …]$ is
  defined as the finite continued fraction $[a₀; a₁, …, aₙ]$.
\end{definition}

For a continued fraction with only one entry, the convergent is simply $a₀/1$.
The convergent of longer continued fractions can be calculated inductively as follows:
\[
  [a₀; a₁, …, aₙ]
  = a₀ + \frac{1}{[a₁; a₂, …, aₙ]}
  = a₀ + \frac{\tilde q_{n-1}}{\tilde p_{n-1}}
  = \frac{\tilde p_{n-1} a₀ + \tilde q_{n-1}}{\tilde p_{n-1}},
\]
where $\tilde p_{n-1} / \tilde q_{n-1}$ is the convergent of $[a₁; a₂, …, aₙ]$.

\begin{example}
  % TODO: Add example for some continued fraction here
\end{example}

\section{Periodic Continued Fractions}

\begin{definition}
  A continued fraction $[a₀; a₁, …]$ is called \emph{eventually periodic}
  if there exists an index $k₀ ≥ 0$ and a period $ℓ ≥ 1$ such that $aₖ = a_{k+ℓ}$ for every $k ≥ k₀$.
  A continued fraction is called \emph{purely periodic} if $k₀ = 0$.
\end{definition}

\begin{example}
  Let $x = \sqrt{7}$.
  The algorithm proceeds as follows:
  \[
    \begin{array}{rclcrcl}
      \sqrt{7}      & = & 2 · 1               + (\sqrt{7} - 2)    & ≈ & 2.6458 & = & 2 · 1 + 0.6458      \\
      1             & = & 1 · (\sqrt{7} - 2)  + (3 - \sqrt{7})    & ≈ & 1      & = & 1 · 0.6458 + 0.3542 \\
      \sqrt{7} - 2  & = & 1 · (3 - \sqrt{7})  + (2\sqrt{7} - 5)   & ≈ & 0.6458 & = & 1 · 0.3542 + 0.2915 \\
      3 - \sqrt{7}  & = & 1 · (2\sqrt{7} - 5) + (8 - 3\sqrt{7})   & ≈ & 0.3542 & = & 1 · 0.2915 + 0.0627 \\
      2\sqrt{7} - 5 & = & 4 · (8 - 3\sqrt{7}) + (14\sqrt{7} - 37) & ≈ & 0.2915 & = & 4 · 0.0627 + 0.0407 \\
      & \vdots & & \vdots & & \vdots &
    \end{array}
  \]
\end{example}

The interesting connection between the quadratic irrationals and continued
fraction is that a continued fraction of a number $x ∈ ℝ$ is eventually
periodic if and only if $x$ is a quadratic irrational.
We begin with the first direction:

\begin{lemma}
  Let $x ∈ ℝ$, then
  \[
    [a₀; a₁, …, a_n, x] = [a₀; a₁, …, a_n + 1/x]
  \]
\end{lemma}

\begin{proof}
  \label{lem:nesting}
  If $n = 0$, then
  \[
    [a₀; x] = a₀ + \frac{1}{[x]} = a₀ + \frac{1}{x} = [a₀ + 1/x].
  \]
  Suppose the lemma is true for some $n ≥ 0$, then
  \begin{align*}
    [a₀; a₁, …, aₙ, x]
    & = a₀ + \frac{1}{[a₁; a₂, …, aₙ, x]} \\
    & = a₀ + \frac{1}{[a₁; a₂, …, aₙ + 1/x]} \\
    & = [a₀; a₁, …, aₙ, x]. \qedhere
  \end{align*}
\end{proof}

We define the following sequences over the sequence $\{a_n\}$:
\begin{align*}
  pₙ & = p_{n-1} a_n + p_{n - 2}, & p_{-1} & = 1, & p_{-2} & = 0, \\
  qₙ & = q_{n-1} a_n + q_{n - 2}, & q_{-1} & = 0, & q_{-2} & = 1.
\end{align*}

\begin{lemma}
  \label{lem:wallis}
  Let $x ∈ ℝ$, then
  \[
    [a₀; a₁, …, a_{n-1}, x] = \frac{p_{n-1} x + p_{n-2}}{q_{n-1} x + q_{n-2}}.
  \]
\end{lemma}

\begin{proof}
  If $n = 0$, then
  \[
    [x] = x = \frac{1x + 0}{0x + 1} = \frac{p_{-1} x + p_{-2}}{q_{-1} x + q_{-2}}.
  \]
  Suppose, the lemma is true for $n ≥ 0$.
  By Lemma~\ref{lem:nesting}, we have
  \begin{align*}
    [a₀; a₁, …, aₙ, x]
    & = [a₀; a₁, …, aₙ + 1/x].
  \end{align*}
  From the induction hypothesis, it follows that
  \begin{align*}
    [a₀; a₁, …, aₙ + 1/x]
    & = \frac{p_{n - 1} (aₙ + 1/x) + p_{n-2}}{q_{n-1} (aₙ + 1/x) + q_{n-2}} \\
    & = \frac{x (p_{n-1} aₙ + p_{n-2}) + p_{n-1}}{x (q_{n-1} aₙ + q_{n-2}) + q_{n-1}} \\
    & = \frac{x pₙ + p_{n-1}}{x pₙ + p_{n-1}}. \qedhere
  \end{align*}
\end{proof}

\begin{theorem}
  If the continued fraction representation of a number $x ∈ ℝ$ is eventually periodic,
  then $x$ is a quadratic irrational.
\end{theorem}

\begin{proof}
  Let $x$ be a continued fraction $[a₀; a₁, …]$ with a period of length $ℓ ≥ 1$
  starting at an index $k ≥ 0$,
  i.e. $x_k = [a_k; a_{k+1}, …] = [a_{k+ℓ}; a_{k+ℓ+1}, …] = x_{k+ℓ}$.
  By Lemma~\ref{lem:wallis}, we have
  \[
    x
    = \frac{p_k x_k + p_{k-1}}{q_k x_k + q_{k-1}}
    = \frac{p_{k+ℓ} x_{k+ℓ} + p_{k+ℓ-1}}{q_{k+ℓ} x_{k+ℓ} + q_{k+ℓ-1}}
    = \frac{p_{k+ℓ} x_k + p_{k+ℓ-1}}{q_{k+ℓ} x_k + q_{k+ℓ-1}}
  \]
  Multiplying by the denominators on both sides results in the quadratic equation
  \[
    (q_{k+ℓ} x_k + q_{k+ℓ-1})(p_k x_k + p_{k-1}) - (q_k x_k + q_{k-1}) (p_{k+ℓ} x_k + p_{k+ℓ-1}) = 0.
  \]
  Hence, $x_k$ is a quadratic irrational and $x$ must be one too since $x ∈ ℚ(x_k)$.
\end{proof}

\section{Continued Fractions of Quadratic Irrationals}

