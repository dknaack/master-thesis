\chapter{Periodic Representation of Quadratic Irrationals}
\label{ch:quadratic}

We begin with the case of quadratic irrationals.
A quadratic irrational is any real number which is a root of a polynomial with degree $2$.
For quadratic irrationals, it is already well known that they can be
represented using periodic continued fractions,
where continued fractions are fractions of the form
\[
  a₀ + \cfrac{1}{a₁ + \cfrac{1}{a₂ + \cfrac{1}{⋱}}}
\]
with $a₀ ∈ ℤ$ and $a₁, a₂, … ∈ ℤ_{> 0}$.
They are periodic when the sequence $a₀, a₁, a₂, …$ eventually repeats.
In this chapter we will prove that the continued fractions of a number are
periodic if and only if the number is a quadratic irrational.
Periodic continued fractions were first analyzed by Euler,
who has shown that such continued fractions must be quadratic irrationals.
Later, Lagrange \cite{Lagrange70} has proven the other direction, that
quadratic irrationals must always have periodic continued fractions.
For the proof, we require many properties from the continued fractions.
Specifically, we will show that continued fractions are always the best
rational approximation of a real number.
The continued fractions can also be interpreted geometrically.
This was initially proposed by Klein \cite{Klein95},
who viewed the continued fractions as points of a lattice.
A similar geometrical interpretation will be used in a later chapter for the
generalization of the continued fractions to higher dimensions.

% ==============================================================================
\section{Continued Fractions}
% ==============================================================================

We begin with a more precise definition of what a continued fraction is and in
particular how infinite continued fractions are defined.
Although continued fractions are typically defined over a sequence of positive integers,
we extend the definition to allow for real numbers.
This will be useful for the theorems which follow.
In general, $r₀, r₁, …$ will denote a sequence of real numbers
and $a₀, a₁, …$ will denote a sequence of positive integers with the exception
of the first entry $a₀$, which can be any integer.

\begin{definition}
  Given a sequence $\{r_n\}_{n ≥ 0}$ of real numbers, the finite continued
  fractions over this sequence are defined inductively as
  \[
    [r₀] = r₀, \qquad
    [r₀; r₁, …, rₙ] = r₀ + \frac{1}{[r₁; r₂, …, rₙ]}.
  \]
  The infinite continued fraction $[r₀; r₁, r₂, …]$ is then defined if the limit
  \[
    r = \lim_{n → ∞} [r₀; r₁, …, rₙ]
  \]
  exists.
  The fractions $[r₀; r₁, …, rₙ]$ are called the
  \emph{convergents} of the infinite continued fraction $[r₀; r₁, r₂, …]$.
\end{definition}

If the sequence consists of positive integers,
then each convergent $[a₀; a₁, …, aₙ]$ has a unique rational value $pₙ/qₙ$.
This value can be calculated as follows:
For a convergent with only one entry, the convergent is simply $[a₀] = a₀ = a₀/1$.
The convergent of a longer fraction can be calculated by the following:
\[
  [a₀; a₁, …, aₙ]
  = a₀ + \frac{1}{[a₁; a₂, …, aₙ]}
  = a₀ + \frac{\tilde q_{n-1}}{\tilde p_{n-1}}
  = \frac{\tilde p_{n-1} a₀ + \tilde q_{n-1}}{\tilde p_{n-1}},
\]
where $\tilde p_{n-1} / \tilde q_{n-1}$ is the convergent of $[a₁; a₂, …, aₙ]$.
Of course, this requires calculating a convergent of a different continued
fraction.
Instead, we can use a more direct way to calculate the convergent $pₙ/qₙ$ from
the previous convergents $p_{n-1}/q_{n-1}$ and $p_{n-2}/q_{n-2}$ of the same
continued fractions.
To prove this, we will first need the following lemma.

\begin{lemma}
  \label{lem:cf-nesting}
  Let $x ∈ ℝ$, then
  \[
    [r₀; a₁, …, r_n, x] = [r₀; r₁, …, r_n + 1/x]
  \]
\end{lemma}

\begin{proof}
  If $n = 0$, then
  \[
    [r₀; x] = r₀ + \frac{1}{[x]} = r₀ + \frac{1}{x} = [r₀ + 1/x].
  \]
  Suppose the lemma is true for some $n ≥ 0$, then
  \begin{align*}
    [r₀; r₁, …, rₙ, x]
    & = r₀ + \frac{1}{[r₁; r₂, …, rₙ, x]} \\
    & = r₀ + \frac{1}{[r₁; r₂, …, rₙ + 1/x]} \\
    & = [r₀; a₁, …, rₙ, x]. \qedhere
  \end{align*}
\end{proof}

We can use the following recurrence relation to calculate the convergents of a
continued fraction $[a₀; a₁, …, aₙ]$:
\begin{align*}
  p_n & = p_{n-1} a_n + p_{n-2}, & p_{-1} & = 1, & p_{-2} & = 0, \\
  q_n & = q_{n-1} a_n + q_{n-2}, & q_{-1} & = 1, & q_{-2} & = 0
\end{align*}
The correctness is shown by the following lemma.

\begin{lemma}
  \label{lem:cf-wallis}
  Let $x ∈ ℝ$, then
  \[
    [a₀; a₁, …, a_{n-1}, x] = \frac{pₙ}{qₙ} = \frac{p_{n-1} x + p_{n-2}}{q_{n-1} x + q_{n-2}}.
  \]
\end{lemma}

\begin{proof}
  If $n = 0$, then
  \[
    [x] = x = \frac{1x + 0}{0x + 1} = \frac{p_{-1} x + p_{-2}}{q_{-1} x + q_{-2}}.
  \]
  Suppose, the lemma is true for $n ≥ 0$.
  By Lemma~\ref{lem:cf-nesting}, we have
  \begin{align*}
    [a₀; a₁, …, aₙ, x]
    & = [a₀; a₁, …, aₙ + 1/x].
  \end{align*}
  From the induction hypothesis, it follows that
  \begin{align*}
    [a₀; a₁, …, aₙ + 1/x]
    & = \frac{p_{n - 1} (aₙ + 1/x) + p_{n-2}}{q_{n-1} (aₙ + 1/x) + q_{n-2}} \\
    & = \frac{x (p_{n-1} aₙ + p_{n-2}) + p_{n-1}}{x (q_{n-1} aₙ + q_{n-2}) + q_{n-1}} \\
    & = \frac{pₙ x + p_{n-1}}{qₙ x + q_{n-1}}. \qedhere
  \end{align*}
\end{proof}

\begin{lemma}
  \label{lem:cf-det}
  $p_n q_{n-1} - q_n p_{n-1} = (-1)^{n+1}$ for $n ≥ -1$.
\end{lemma}

\begin{proof}
  For $n = -1$, we have
  \[
    p_{-1} q_{-2} - q_{-1} p_{-2} = 1 - 0 = 1.
  \]
  Suppose that the lemma holds for $n ≥ -1$, then
  \begin{align*}
    p_{n+1} q_n - q_{n+1} p_n
    & = (p_n a_{n+1} + p_{n-1}) q_n - (q_n a_{n+1} + q_{n-1}) p_n \\
    & = p_{n-1} q_n - q_{n-1} p_n \\
    & = (-1) (p_n q_{n-1} - q_n p_{n-1}) \\
    & = (-1)^{n+1}. \qedhere
  \end{align*}
\end{proof}

% ==============================================================================
\section{Construction of Continued Fractions}
% ==============================================================================

% TODO: Should we jump out of the gate with this problem?
For a representation of the real numbers,
we need to construct a unique continued fractions for every number $x ∈ ℝ$.
Although the definition of a continued fraction allows real numbers,
for the construction we restrict ourselves to continued fractions which only
contain integers.
More specifically, we will only look at continued fractions $[a₀; a₁, a₂, …]$
with $a₀ ∈ ℤ$ and $aₙ ∈ ℤ_{> 0}$.
However, this does not guarantee a unique representation alone.
Consider $x = 3/2$, with the current requirements there are two possible representations:
\[
  x = [1; 1, 1] = 1 + \cfrac{1}{1 + \cfrac{1}{1}} \qquad \text{ or } \qquad x = [1; 2] = 1 + \cfrac{1}{2}.
\]
The issue is that we can always split the last coefficient in the continued fraction.
In general, if $x = [a₀; a₁, …, aₙ]$, then also $x = [a₀; a₁, …, aₙ - 1, 1]$.
Therefore, we additionally require that in a finite continued fraction the last value is never $1$.

To construct a continued fraction for a particular number $x ∈ ℝ$,
we use the Euclidean algorithm.
For a rational number $x = p/q$ we can run the algorithm
on the inputs $(p, q)$.
Recall that the Euclidean algorithm runs in two steps: modulo and exchange.
The modulo step removes the integer part of the fraction $p/q$
and the exchange step swaps the numerator with the denominator,
or equivalently it inverts the fraction.

\begin{example}
  Consider $x = 13/5$.
  The Euclidean algorithm computes
  \begin{align*}
    13 & = 2 · 5 + 3 \\
     5 & = 1 · 3 + 2 \\
     3 & = 1 · 2 + 1 \\
     2 & = 2 · 1 + 0.
  \end{align*}
  The factors in each line correspond directly to the continued fraction of $13/5$:
  \[
    \frac{13}{5}
    = [2; 1, 1, 2]
    = 2 + \cfrac{1}{1 + \cfrac{1}{1 + \cfrac{1}{2}}}
    = 2 + \cfrac{1}{1 + \cfrac{2}{3}}
    = 2 + \cfrac{3}{5}
    = \frac{13}{5}.
  \]
\end{example}

\begin{theorem}
  \label{thm:rat-cf}
  Every rational number has a finite continued fraction representation.
\end{theorem}

\begin{proof}
  Let $p/q$ be a reduced fraction, i.e. $\gcd(p, q) = 1$.
  The proof is done by induction over the number of steps when running the
  Euclidean algorithm on $(p, q)$.
  Suppose only one step is required, then $p = a₀ q + 0$.
  Because $p/q$ is reduced, $q = 1$ and $p/q$ is an integer.
  Hence, $[a₀] = a₀ = p$ is a valid continued fraction of $p/q$.
  For $n ≥ 0$, let $p = a₀ q + r$ be the first step of the Euclidean algorithm.
  By induction, suppose that $q/r$ has a finite continued fraction $[a₁; a₂, …, aₙ]$.
  Then,
  \[
    \frac{p}{q}
    = a₀ + \frac{r}{q}
    = a₀ + \frac{1}{\frac{r}{q}}
    = a₀ + \frac{1}{[a₁; a₂, …, aₙ]}
    = [a₀; a₁, …, aₙ].
  \]
  Therefore, there exists a continued fraction for every rational number $p/q$.
\end{proof}

For the continued fractions of irrational numbers,
we extend the Euclidean algorithm to allow real numbers as input.
The algorithm still works the same.
The modulo step subtracts the smaller number from the larger until it is no
longer possible and the exchange step swaps the two inputs.
This time, there is no immediately apparent way to split an irrational number
$x$ into two inputs $(a, b)$.
However, a simple solution is to use $(x, 1)$ as the input to the Euclidean
algorithm.
In fact, for the rational numbers we similarly could have used $(p/q, 1)$ as
the input.

% TODO: We should probably use a simpler example
\begin{example}
  Consider $x = \sqrt{7}$.
  The Euclidean algorithm proceeds as follows:
  \[
    \begin{array}{rclcrcl}
      \sqrt{7}      & = & 2 · 1               + (\sqrt{7} - 2)    & ≈ & 2.6458 & = & 2 · 1 + 0.6458      \\
      1             & = & 1 · (\sqrt{7} - 2)  + (3 - \sqrt{7})    & ≈ & 1      & = & 1 · 0.6458 + 0.3542 \\
      \sqrt{7} - 2  & = & 1 · (3 - \sqrt{7})  + (2\sqrt{7} - 5)   & ≈ & 0.6458 & = & 1 · 0.3542 + 0.2915 \\
      3 - \sqrt{7}  & = & 1 · (2\sqrt{7} - 5) + (8 - 3\sqrt{7})   & ≈ & 0.3542 & = & 1 · 0.2915 + 0.0627 \\
      2\sqrt{7} - 5 & = & 4 · (8 - 3\sqrt{7}) + (14\sqrt{7} - 37) & ≈ & 0.2915 & = & 4 · 0.0627 + 0.0407 \\
                    & ⋮ &                                         & ⋮ &        & ⋮ &
    \end{array}
  \]
  This corresponds to the continued fraction $\sqrt{7} = [2; 1, 1, 1, 4, …]$.
\end{example}

\begin{figure}[tb]
  \centering
  \includestandalone{figures/golden-rectangle}
  \caption{
    The golden rectangle with side lengths $1$ and $φ$.
    Cutting of one unit square from the rectangle gives another rectangle with lengths $φ - 1$ and $1$.
    The ratio between the longer and shorter side remains the same.
  }
  \label{fig:golden-rectangle}
\end{figure}

\begin{example}
  Consider the golden ratio $φ$.
  It is the positive real root of the polynomial $p(x) = x^2 - x - 1$,
  which means that it satisfies $φ = 1 + 1/φ$.
  This makes the construction of the continued fraction particularly simple since
  \[
    φ = 1 + \cfrac{1}{1 + \cfrac{1}{1 + \cfrac{1}{⋱}}}.
  \]
  So the golden ratio $φ$ is represented by $[1; \overline{1}]$.
\end{example}

For the golden ratio, there is also a geometric interpretation via the golden
rectangle as shown in Figure~\ref{fig:golden-rectangle}.
The golden rectangle has side lengths of $1$ and $φ$,
and the Euclidean algorithm tries to remove as many unit squares inside the
golden rectangle as possible.
In this case, only one square is removed
and we get a new rectangle with side lengths $1$ and $φ - 1$.
But the ratios between the longer and shorter sides remain the same since
\[
  φ^2 - φ - 1 = 0 ⇔ φ(φ - 1) = 1 ⇔ \frac{φ}{1} = \frac{1}{φ - 1}.
\]
Therefore, in the next rectangle only one square of length $φ - 1$ will be
removed again.

\begin{lemma}
  \label{lem:cf-approx}
  Let $p_n/q_n$ be the convergents of $x ∈ ℝ$, then
  \[
    \left| x - \frac{pₙ}{qₙ} \right| < \frac{1}{qₙ^2}.
  \]
\end{lemma}

% TODO: Have we proven that (p_{n-1} q_n - p_n q_{n-1}) = (-1)^n yet?
\begin{proof}
  Suppose $x = [a₀; a₁, …, a_{n-1}, xₙ]$ for some $xₙ ∈ ℝ$ and $pₙ/qₙ = [a₀; a₁, …, a_{n-1}, aₙ]$ with $aₙ = \floor{xₙ}$.
  By Lemma~\ref{lem:cf-wallis},
  \begin{align*}
    \left| x - \frac{pₙ}{qₙ} \right|
    & = \left| \frac{x_n p_{n-1} + p_{n-2}}{x_n q_{n-1} + q_{n-2}} - \frac{a_n p_{n-1} + p_{n-2}}{a_n q_{n-1} + q_{n-2}} \right| \\
    & = \left| \frac{(x_n p_{n-1} + p_{n-2})(a_n q_{n-1} + q_{n-2}) - (x_n q_{n-1} + q_{n-2})(a_n p_{n-1} + p_{n-2})}{(x_n q_{n-1} + q_{n-2})(a_n q_{n-1} + q_{n-2})} \right| \\
    & = \left| \frac{(p_{n-1} q_{n-2} + q_{n-1} p_{n-2})(x_n - a_n)}{((x_n - a_n) q_{n-1} + q_n) q_n} \right| \\
    & = \Biggl| \frac{(-1)^{n+1} \overbrace{(x_n - a_n)}^{≤ 1}}{q_n^2 + \underbrace{(x_n - a_n)}_{≥ 0} q_{n-1} q_n} \Biggr| < \frac{1}{q_n^2}. \qedhere
  \end{align*}
\end{proof}

\begin{theorem}
  \label{thm:irrat-cf}
  Every irrational number has a unique continued fraction.
\end{theorem}

\begin{proof}
  From the previous lemma it follows that $[a₀; a₁, …] = \lim_{n → ∞} [a₀; a₁, …, aₙ] = x$.
  Suppose there is a different sequence $\{b_n\}_{n ≥ 0}$ with $[b₀; b₁, …] = x$.
  % TODO
  Therefore, the sequence $\{aₙ\}_{n ≥ 0}$ is unique.
\end{proof}

% ==============================================================================
\section{The Geometry behind Continued Fractions}
% ==============================================================================

\begin{figure}[tb]
  \centering
  \includestandalone{figures/klein-polygon}
  \caption{
    A Klein polygon for $\sqrt{2}$.
  }
  \label{fig:klein-polygon}
\end{figure}

With the prospect of the generalized Euclidean algorithm, I present a geometric
proof based on Klein \cite{Klein95}.
The basis behind this proof is that instead of viewing the convergents $p_n/q_n$ as
fractions on a 1-dimensional number line,
we view them as two dimensional integer vectors $B_n$, where the first coordinate
represents the numerator $p$ and the second coordinate the denominator $q$.

From Lemma~\ref{lem:cf-wallis},
we directly know that the vectors $B_n$ can be calculated as follows:
\begin{align*}
  B_n =
  \begin{pmatrix}
    p_n \\ q_n
  \end{pmatrix}
  =
  \begin{pmatrix}
    p_{n-1} \\ q_{n-1}
  \end{pmatrix}
  a_n
  +
  \begin{pmatrix}
    p_{n-2} \\ q_{n-2}
  \end{pmatrix}
  = B_{n-1} a_n + B_{n-2}
\end{align*}
This can also be interpreted geometrically, as shown in Figure~\ref{fig:klein-polygon}.
We begin with the unit vectors $(1, 0)$ and $(0, 1)$.
Then, we start at the point $B_{-2} = (0, 1)$ and draw a line using the vector $B_{-1} = (1, 0)$.
This line intersects the irrational line $(1, α)$ at some point
and the next vector $B_0$ is the integer lattice point on the line before the
intersection.
We continue with $B_{-1}$ and draw a line using the vector $B_0$.
The next vector $B_2$ is the integer lattice point before the intersection with $(1, α)$, again.

\begin{figure}[tb]
  \centering
  \includestandalone{figures/parallelogram-cover}
  \caption{
    The parallelogram spanned by $B$ and $B'$ contains only $0$ as an integral point.
    The rest of the surface can be covered by identical parallelograms.
    Therefore, the surface can only contain an integral point at $B$.
  }
\end{figure}

In his original lecture notes \cite{Klein95},
Klein showed that the closest points to the irrational line $α$ are convergents and
vice-versa.

\begin{definition}
  A nonzero point $(x, y) ∈ ℤ^2$ is a \emph{relative minimum} with respect to a
  line $(1, α)$, if for every point $(x', y') ∈ ℤ^2$ with $x' ≤ x$ or $y ≤ y'$,
  \[
    |x α - y| ≤ |x' α - y'|.
  \]
\end{definition}

\begin{theorem}
  \label{thm:conv-is-relmin}
  Every convergent is a relative minimum.
\end{theorem}

\begin{proof}
  For the first two convergents, this is obviously true.
  By induction, suppose that the convergent $B_{n-1}$ and $B_n$ are relative minima.
  Reflecting $B_{n+1}$ across the line $α$ produces two parallel lines:
  One going through $B_{n+1}$ and one going through the reflected point.
  Any point which is closer must lie in the cylinder between the two lines.
  The parallelogram constructed from the points $B_{n-1}, B_n$ and $B_{n+1}$
  covers this entire cylinder, because $B_{n-1}$ and $B_n$ are both further
  away from the line than $B_n$.
  But the parallelogram only contains
  \begin{align*}
    |\det \begin{pmatrix}
      B_{n+1} - B_{n-1} & B_n - B_{n-1} \\
    \end{pmatrix}|
    & = |\det \begin{pmatrix}
      B_n a_{n+1} & B_n - B_{n-1} \\
    \end{pmatrix}| \\
    & = a_{n+1} |\det \begin{pmatrix}
      B_n & B_n \\
    \end{pmatrix} - \det \begin{pmatrix}
      B_n & B_{n-1} \\
    \end{pmatrix}| \\
    & = a_{n+1} |0 - 1| = a_{n+1}
  \end{align*}
  integer lattice points
  and all of these point are on the line between $B_{n-1}$ and $B_{n+1}$.
  Therefore, $B_{n+1}$ is also a relative minimum.
\end{proof}

% TODO: Technically, they can also be a lattice point between two convergents.
\begin{theorem}
  \label{thm:relmin-is-conv}
  Every relative minimum is a convergent.
\end{theorem}

\begin{proof}

\end{proof}

% ==============================================================================
\section{Continued Fractions of Quadratic Irrationals}
% ==============================================================================

% TODO: There are still some issues with this section, like what about
% quadratic irrationals which aren't square roots?

\begin{definition}
  A continued fraction $[a₀; a₁, …]$ is called \emph{eventually periodic}
  if there exists an index $K ≥ 0$ and a period $ℓ ≥ 1$ such that $aₖ = a_{k+ℓ}$ for every $k ≥ K$.
  A continued fraction is called \emph{purely periodic} if $k₀ = 0$.
\end{definition}

For a periodic continued fraction starting at $K$ with length $ℓ$,
we will denote it as $[a₀; a₁, …, a_{K-1}, \overline{a_K, …, a_{K+ℓ}}]$.
This is similar to how in decimal notation, we denote a period with a bar over the digits.
For example, $1/3 = 0.\overline{3}$.

\begin{example}
  Consider $x = \sqrt{2}$.
  We can rewrite $x$ as follows:
  \begin{align*}
    x
    = 1 + (\sqrt{2} - 1)
    = 1 + \frac{(\sqrt{2} - 1) (1 + \sqrt{2})}{1 + \sqrt{2}}
    = 1 + \frac{1}{1 + \sqrt{2}}
  \end{align*}
  Expanding $\sqrt{2}$ in the equation infinitely many times gives us
  \begin{align*}
    \sqrt{2}
    = 1 + \frac{1}{2 + \cfrac{1}{2 + \cfrac{1}{2 + \cfrac{1}{⋱}}}}.
  \end{align*}
  So the continued fraction of $\sqrt{2}$ is $[1; \overline{2}]$.
\end{example}

The interesting connection between the quadratic irrationals and continued
fraction is that a continued fraction of a number $x ∈ ℝ$ is eventually
periodic if and only if $x$ is a quadratic irrational.
We begin with the first direction:

\begin{theorem}
  If the continued fraction representation of a number $x ∈ ℝ$ is eventually periodic,
  then $x$ is a quadratic irrational.
\end{theorem}

\begin{proof}
  Let $x$ be a continued fraction $[a₀; a₁, …]$ with a period of length $ℓ ≥ 1$
  starting at an index $k ≥ 0$,
  i.e. $x_k = [a_k; a_{k+1}, …] = [a_{k+ℓ}; a_{k+ℓ+1}, …] = x_{k+ℓ}$.
  By Lemma~\ref{lem:cf-wallis}, we have
  \[
    x
    = \frac{p_k x_k + p_{k-1}}{q_k x_k + q_{k-1}}
    = \frac{p_{k+ℓ} x_{k+ℓ} + p_{k+ℓ-1}}{q_{k+ℓ} x_{k+ℓ} + q_{k+ℓ-1}}
    = \frac{p_{k+ℓ} x_k + p_{k+ℓ-1}}{q_{k+ℓ} x_k + q_{k+ℓ-1}}
  \]
  Multiplying by the denominators on both sides results in the quadratic equation
  \[
    (q_{k+ℓ} x_k + q_{k+ℓ-1})(p_k x_k + p_{k-1}) - (q_k x_k + q_{k-1}) (p_{k+ℓ} x_k + p_{k+ℓ-1}) = 0.
  \]
  Hence, the complete quotient $x_k$ is a quadratic irrational and
  since $x$ is a rational expression of $x_k$ it must also be a quadratic irrational.
\end{proof}

The converse was originally proven by Lagrange \cite{Lagrange70}.
We construct the continued fraction for a particular quadratic irrational using
the Euclidean algorithm.
When running the Euclidean algorithm,
the only possible numbers it can produce must be of the form
\[
  p + \sqrt{D} q
\]
since the Euclidean algorithm can only subtract a constant factor of either an
integer or the quadratic irrational.
These numbers lie in a special field called a quadratic field.
A quadratic field, denoted as $ℚ(\sqrt{D})$, is a field extension of the rational numbers.
It is the smallest field that contains $\Q$ as a subfield and $\sqrt{D}$.
This means that it must contain all numbers $p + \sqrt{D} q$ with $p, q ∈ ℚ$.

A different interpretation of the field extension would be as a two-dimensional
vector space over the rational numbers.
An element $p + \sqrt{D} q ∈ ℚ(\sqrt{D})$ would be seen as the vector $(p, q) ∈ ℚ^2$.
Addition of two elements would correspond to vector addition
and multiplication with a rational number would correspond to a scalar multiplication.
Multiplication of two elements $a, b ∈ ℚ(\sqrt{D})$ is more complicated.
If we fix one element $a = a₀ + \sqrt{D} a₁$, then multiplication is a linear operation:
\[
  (a₀ + \sqrt{D} a₁)(b₀ + \sqrt{D} b₁) = (a₀ b₀ + D a₁ b₁) + \sqrt{D} (a₀ b₁ + a₁ b₀)
\]
which is equivalent to
\[
  \begin{pmatrix}
    a₀ & D a₁ \\
    a₁ & a₀ \\
  \end{pmatrix}
  \begin{pmatrix}
    b₀ \\
    b₁ \\
  \end{pmatrix}
  =
  \begin{pmatrix}
    a₀ b₀ + D a₁ b₁ \\
    a₀ b₁ + a₁ b₀ \\
  \end{pmatrix}.
\]

\begin{definition}
  The norm $N(α)$ of an number $α$ in a quadratic field $ℚ(\sqrt{D})$ is defined as
  the determinant of the multiplication matrix of $α$.
\end{definition}

The norm is an instance of Pell's equation.

\begin{lemma}
  The norm of the convergents $N(B_n)$ is bounded by some constant $c$ independent of $n$.
\end{lemma}

\begin{proof}
  By Lemma~\ref{lem:cf-approx}, there exists some $δₙ ∈ ℝ$ with $|δₙ| < 1$
  such that $pₙ = qₙ \sqrt{D} + \frac{δₙ}{qₙ}$.
  Therefore, we can bound the norm by
  \begin{align*}
    |N(αₙ)|
    & = |pₙ^2 - D qₙ^2| \\
    & = \left|\left(qₙ \sqrt{D} + \frac{δₙ}{qₙ} \right)^2 - Dqₙ^2\right| \\
    & = \Biggl|qₙ^2 D + 2δ \sqrt{D} + \underbrace{\frac{δₙ^2}{qₙ^2}}_{\le 1} - Dqₙ^2\Biggr| \\
    & \le 2 \sqrt{D} + 1 \qedhere
  \end{align*}
\end{proof}

\begin{theorem}
  If $x$ is a quadratic irrational,
  then its continued fraction is periodic.
\end{theorem}

\begin{proof}
  By the previous lemma, the norm of any convergent is always bounded.
  Therefore, there must be at least two different convergents $Bᵢ$ and $Bⱼ$ with $N(Bᵢ) = N(Bⱼ)$.
  It follows that there exists some fundamental unit $ε ∈ ℚ(\sqrt{D})$ with $ε
  ≠ 1$ and $N(ε) = \det(M_ε) = 1$ such that
  \[
    M_ε Bᵢ = Bⱼ.
  \]
\end{proof}

Although the previous lemma already shows that continued fractions have a bounded norm,
we can go even further.
In fact, the convergent of a continued fraction reach all fundamental
units, i.e. a non-trivial vector with norm $±1$.
The proof for this follows from the theorems shown by Klein.
We show that every fundamental unit is a relative minimum,
from which it follows that every fundamental unit is also a convergent.

\begin{figure}[tb]
  \centering
  \includestandalone{figures/critical-section}
  \caption{
    The hyperbolas each contain only elements with norm $±1$.
    The red area could contain an integral point, in which case this point
    would be closer than the initial point.
    The gray area cannot contain an integral point since the norm would be
    fractional.
  }
  \label{fig:critical-section}
\end{figure}

\begin{proposition}
  Every fundamental unit is a relative minimum.
\end{proposition}

\begin{proof}
  Let $ε = (ε₀, ε₁)$ be a fundamental unit and let $δ = |ε₀ α - ε₁|$ denote the
  distance of $ε$ to the line $α$.
  Suppose there is a point $(x, y)$ which is closer than $ε$.
  The point cannot be on the same side of the line $α$ as $ε$,
  since any unit strays further away from the line
  and therefore also any element with larger norm strays further.
  Therefore, $(x, y)$ and $ε$ must lie on different sides.

  For the point $(x, y)$ to be closer, it must satisfy
  \[
    |x α - y| < |ε₀ α - ε₁| \text{ and } |N(x, y)| ≤ |N(ε)|.
  \]
  This area is also shown in Figure~\ref{fig:critical-section}
  and any lattice point which is closer must be inside this critical area.
  However, no such lattice point exists.
  The area is actually encompassed by the parallelogram induced by the
  multiplication matrix of $ε$.
  Since this multiplication matrix has determinant $±1$, there cannot be a
  lattice point inside the parallelogram.
\end{proof}

\begin{corollary}
  Every fundamental unit is a convergent.
\end{corollary}
