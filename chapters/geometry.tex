\chapter{Geometrical Interpretation of Continued Fractions}

\section{Quadratic Fields as a Vector Space}

\begin{itemize}
  \item Quadratic field extensions can be seen as a vector space over $ℚ$ with dimension $2$.
  \item A vector consists of a rational part and a multiplicative of the root part.
  \item Conjugate: Flip the sign before the root
  \item Norm: Given $a + b\sqrt{r}$, the norm is $N(a + b \sqrt{r}) = a^2 - r b^2$.
  \item Related to Pell's Equation
  \item Inverse: Conjugate divided by the norm
  \item Number of vectors is finite when considering the continued fraction,
    but not when considering the Euclidean algorithm
\end{itemize}

\section{Conic Sections}

\begin{itemize}
  \item
    Everything is in some way related to a cone
  \item
    Norm:
    Vertical cross section of a cone
  \item
    Projection from vector space to real numbers:
    Horizontal cross-section of a cone
  \item
    Parabola: Parallel cross-section of a cone
  \item
    In higher dimensions, we also get somewhat of a conic section.
    The problem is that this means the degree increases to $2d$ instead of $d+1$.
\end{itemize}

\section{Klein Polyhedrons}

\begin{figure}[b]
  \centering
  \includestandalone{figures/critical-section}
  \caption{
    The hyperbolas each contain only elements with norm $±1$.
    The red area could contain an integral point, in which case this point
    would be closer than the initial point.
    The gray area cannot contain an integral point since the norm would be fractional.}
\end{figure}

\begin{figure}[b]
  \centering
  \includestandalone{figures/parallelogram-cover}
  \caption{
    The parallelogram spanned by $B$ and $B'$ contains only $0$ as an integral point.
    The rest of the surface can be covered by identical parallelograms.
    Therefore, the surface can only contain an integral point at $B$.
  }
\end{figure}

\[
  B_n = a_n B_{n-1} + B_{n-2}
\]

\begin{definition}
  A point $(x, y) ∈ ℤ^2$ is a \emph{relative minimum} of $ω$,
  if $|x - ω y| ≤ |x' - ω y'|$ for any point $(x', y') ∈ ℤ^2$ with $x' ≤ x$ or $y' ≤ y$.
\end{definition}

\begin{theorem}
  All points $(x, y)$ which satisfy Pell's equation are relative minima.
\end{theorem}

\begin{proof}
  Suppose there exists a point $(x', y')$ with smaller distance.
  In the first case, the point lies below the original point, i.e. $x' ≤ x$.
  Because the point must be integral, we have $x'^2 - ω^2 y'^2 ≥ 1$.
\end{proof}

\begin{theorem}
  Every point $B_i$ is a relative minimum.
\end{theorem}

\begin{proof}
  For the points $B_1 = (1, 0)$ and $B_2 = (0, 1)$ this is clearly true.
  Suppose that the lemma is true for $n$ and $n - 1$.
  Let $B_{n-1}, B_n$ and $B_{n+1}$ be convergents of $ω$.
  Let $B_n'$ be the point reflected across the $ω$-line.
  The point $B_{n+1}$ is not a relative minimum,
  if the parallelogram spanned by $B_n - B_n'$ and $B_{n+1} - B_n'$ contains an integral point.
  This parallelogram is entirely contained by another parallelogram spanned by
  $B_n - B_{n-1}$ and $B_{n+1} - B_{n-1}$.
  The parallelogram contains
  \[
    \det(B_n - B_{n-1}, B_{n+1} - B_{n-1})
    = \det(B_n - B_{n-1}, a_n B_n)
    = (-1)^n a_n
  \]
  integral points.
  But those points can only be an intermediate point or a convergent.
  Since intermediate points are not relative minima,
  the convergent must be a relative minimum.
\end{proof}

\begin{lemma}
  Intermediate points cannot be relative minima.
\end{lemma}

\begin{proof}

\end{proof}

\begin{theorem}
  Every relative minimum is a convergent $B_i$.
\end{theorem}

\begin{proof}
  Suppose there exists a relative minimum $P = (P₀, P₁)$ which is not a convergent.
  Let $B = (B₀, B₁)$ be the smallest convergent such that $P₀ ≤ B₀$ or $P₁ ≤ B₁$
  and $B = (B₀, B₁)$ the previous convergent.
  By construction the parallelogram of $B$ and $B'$ contains $\det(B, B') = 1$ integral point.
\end{proof}

\begin{itemize}
  \item Considers the convergents of a continued fraction as homogeneous coordinates,
    i.e. when we have $p / q$, then this corresponds to the vector $(p, q)$.
  \item Simplical cone: Given basis $B$, the simplical cone $C$ is defined as
    the set of all positive linear combinations.
  \item
    The odd and even convergents are each contained in two different simplical cones
    and connecting them forms the convex hull of the integer points contained in the cones.
  \item
    There exists a geometrical analogue of Lagrange's Theorem for Klein Polyhedron,
    which states that the following two statements are equivalent:
    \begin{itemize}
      \item
        There exists a non-identity operator $A ∈ \mathrm{SL}_2(ℤ)$ with
        distinct real eigenvalues under which the cone is invariant.
      \item
        The integer lengths of consecutive segments in the Klein polygon are periodic.
    \end{itemize}
  \item The generalization is much more complicated.
\end{itemize}

Notes on the generalization:
\begin{itemize}
  \item
    A \emph{star} $\mathrm{St}_v$ is the set of edges incident to a vertex.
    They should form a basis in the respective vector space.
  \item
    We construct a set $V_k$ which contains chains of vertices with length $k$.
  \item
    We construct a graph $G_k$ where the chains are the vertices and two
    vertices are connected if their union forms a chain of length $k + 1$.
  \item
    Given $\mathcal A ⊆ \mathrm{Aff}_n(ℤ)$,
    in an \emph{$\mathcal A$-coloring},
    two nodes $U, V ∈ V_k$ have the same color if there is an operator $A ∈ \mathcal A$,
    which maps $\bigcup_{u ∈ U} \mathrm{St}_u$ to $\bigcup_{v ∈ V} \mathrm{St}_v$.
  \item
    A chain $\{v_i\}_{i ∈ ℤ}$ is \emph{$\mathcal A$-periodic} if and only if
    \begin{itemize}
      \item Every $n-1$ consecutive vertices are affinely independent
        and lie in an $(n-1)$-dimensional face of a sail.
      \item
        The images of this chain in $G_n$ and $G_{n+1}$ have $\mathcal A$-colorings.
      \item
        For any two distinct operators $A, B ∈ \mathcal A$ establishing the
        coloring, the operator $AB^{-1}$ also belongs to $\mathcal A$.
    \end{itemize}
\end{itemize}
